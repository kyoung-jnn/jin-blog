---
title: Node.js, body-parser란?
date: '2021-06-25'
summary: Node.js 서버로 온 응답을 parsing
publish: true
---

# body-parser?

```javascript
const express = require('express');
const app = express();

app.post('/', function (req, res) {
  var post = req.body;
  console.log(post); // undefined
});
```

`Node.js, Express`를 사용하여 요청에 대한 응답을 처리할 때,
`console.log(post)` 부분에서 `undefined`를 볼 수 있습니다.

즉, **req.body**부분을 `undefined`로 처리하고 있습니다.

> 여기서 **body-parser**를 이용하면 <br/> **req.body 데이터**를 사용자가가 원하는 형태로
> parsing 하여 문제를 해결할 수 있습니다! 👍

---

# body-parser 사용법

```javascript
npm install body-parser
```

우선 `body-parser`를 설치해준뒤 아래와 같은 포맷으로 코드를 작성합니다.

```javascript
const express = require('express');
const bodyParser = require('body-parser'); // 모듈을 불러옵니다.
const app = express();
// 추가
app.use(bodyParser().json()); //json 형태로 parsing

app.use(express.urlencoded({ extended: false }));
app.post('/', function (req, res) {
  var post = req.body;
  console.log(post);
});
```

```javascript
app.use(bodyParser().json()); //json 형태로 parsing
```

해당 코드를 통해 json형태로 **req.body**를 파싱합니다.

```javascript
app.use(express.urlencoded({ extended: false }));
```

- **false**: 기본으로 내장된 **querystring 모듈**을 사용합니다.
- **true**: 따로 설치가 필요한 **qs 모듈**을 사용하여 쿼리 스트링을 해석합니다.

**기존 querystring 모듈과 qs 모듈의 차이**는
중첩 객체 처리라고 보면 될 것 같습니다.

[stackoverflow 링크](https://stackoverflow.com/questions/29960764/what-does-extended-mean-in-express-4-0/45690436#45690436)를 참고하세요.

---

> 💥 **Express v4.16.0** 기준으로 **body parser**가 빌트인 되었습니다.
> 따라서 별도의 설치 없이 아래와 같이 이용 가능합니다!

```javascript
const express = require('express');
const app = express();
// 추가
app.use(express().json()); //json 형태로 parsing
app.use(express.urlencoded({ extended: false }));
```
